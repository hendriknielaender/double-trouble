---
publishDate: "Oct 14, 2023"
title: "The best IaC tool in 2023"
description: "A fresh look at infrastructure provisioning tools in 2023 and their performance across different categories."
image: "~/assets/images/thumbnails/iac_best_2023.jpg"
imageCreditUrl: https://labs.openai.com/
tags: [terraform, cloud, infrastructure, IaC, ranking, aws, serverless, bun, cdk]
---
import GithubRepoTag from "~/components/atoms/GithubRepoTag.astro";
import InfoText from "~/components/atoms/InfoText.astro";

The recent release of bun 1.0 still has us all hyped up. The unseen speed of bun, together with a
completely overhauled dev experience by unifying the plethora of tools into one is amazing. This
new sense of speed and convenience got us thinking also about other tools - what about IaC?

At the workplace, the choice of IaC tooling is largely determined by company policy, by what is
generally already used and works reasonably well. Through years of evolution and growing maturity,
a hand ful of projects have gained the most popularity: CDK and terraform (data?). But taking a fresh
look today, what could be the best tool today in the context of serverless AWS?

Let's find out and take a look at the best infrastructure tools of the year. We'll evaluate
currently available infrastructure as code (IaC) tools, and look at them within certain
categories. This is in a specific context which we believe is relevant today: A lambda function
within an AWS account, which runs ontop of bun.

All the code related to this comparison can be found in this repository: <GithubRepoTag text="lambda-iac-2023" repoSlug="flyck/lambda-iac-2023" stargazers="0" issues="0"/>.

## Contenders

### Terraform

<GithubRepoTag text="Terraform" repoSlug="hashicorp/terraform" stargazers="39.1k" issues="1.7k"/> is
an IaC tool that allows you to create both cloud and on-premise infrasture, with providers
available for all major clouds. The code is comprised of the hashicorp language, a custom language
for templating. It supports basic programming features like loops, modules and variables within
certain limits(?).

### Open Tofu

Terraform has recently announced a scary license change, which might restrict the availiability of
terraform in the future. For this reason, the open terraform dubbed as <GithubRepoTag
text="opentofu" repoSlug="opentofu/opentofu" stargazers="15.3k" issues="119"/> repository has been
started in protest. If the license change goes through, this will be a more future-proof version
of terraform, while it has the same core features. Providers won't be affected.

### CDK

The <GithubRepoTag repoSlug="aws/aws-cdk" text="CDK" stargazers="10.7k" issues="1.9k"/> is the
programmatic solution from AWS for IaC tooling. The AWS CTO himself Werner Vogels praised the CDK
as the revolutionary [^1] [^2], and it was the first popular tool to offer infrastructure code
definition via a regular programming language. The initial hype for the CDK has led to a wide
adaption, while it also exposed its limits and shortcomings.

### CDKTF

While the CDK uses AWS CloudFormation under the hood, <GithubRepoTag text="CDKTF"
repoSlug="hashicorp/terraform-cdk" stargazers="4.6k" issues="296"/> uses terraform. This allows to
break the boundaries which exist in certain cases in the hashicorp configuration syntax, and use
"real code". It attempts to combine the benefits of terraform with the flexibility offered by the CDK.

### SST

The serverless stack <GithubRepoTag text="sst" repoSlug="sst/sst" stargazers="18.1k"
issues="660"/> is a combination of tools which aims at providing the best modern developer
experience for fullstack application building. Historically it was comprised of a collection of
streamlined CDK constructs and a live lambda development console. Recently the new and improved
SST Console has been added, which aims at improving the overview over the provisioned
resources. It is like the CDK but with massive batteries included.

### Serverless Framework

An oppiniated tool aimed at simplicity and developer experience around serverless services is the
<GithubRepoTag text="serverless framework" repoSlug="serverless/serverless" stargazers="45.3k"
issues="1k"/>. While it is also connected to a web console for CI/CD, monitoring and debugging,
the main part - the cli makes it easy to deploy lambdas, api gateways and more. Infrastructure is
defined in one yaml file, which can be extended with various plugins.

### AWS SAM

Possibly the initial Amazonian answer to the Serverless Framework is <GithubRepoTag text="AWS SAM"
repoSlug="aws/aws-sam-cli" stargazers="6.4k" issues="383"/>. It's maskot is a little beaver, which
is supposed to help get your things running in the cloud. While it is not as sophisiticated as the
CDK, it has many features which are more geared towards developer productivity, which is also why
the CDK has dependencies on SAM for things like local execution.

<br />
*Non-Contenders*: Among the wide assortment of tools which can be used to provision infrastructure,
there are some we didn't consider for various reasons. For the interested reader, we're still
listing them here for completeness: Pulumi, AWS Cloudformation, AWS Copilot, AWS Composer, AWS App
Runner, AWS Proton, AWS Lightsail, AWS EBS & AWS Amplify.



## Evaluation
|Category|Terraform|Open Tofu|CDK|CDKTF|SAM|SST|Serverless Framework|
|-|-|-|-|-|-|-|-|
|Github Stars|39.1k|15.3k|10.7k|4.6k|6.4k|18.1k|45.3k|
|Github Issues|1.7k|119|1.9k|296|383|660|1k|
|Bootstrap Time|18s|18s|?|?|47s|?|?|
|First deployment time|25s|35s (why?)|?|?|49s|?|?|
|Code deployment time|15s|15s|?|?|31s|?|?|
|Dirty deployment time|15s|15s|?|?|10s|?|?|
|Local Execution|0|0|0.5 <InfoText text="Works by leveraging AWS SAM. Same limitation as sam, plus it doesn't support hot reloading (aws-sam-cli/issues/4000)" />|0|0.5 <InfoText text="Does work in general but not for the bun lambda layer. Bun runtime wont start because sam local won't pass a traceId." />|?|?|
|Local Debugging|0|0|?|0|?|?|?|
|Streamed Cloud Execution|0|0|0|0|0|1|0|
|Overall DX        |2|2|1-2|1|1-2|2|3|
|Versatility Rating|3|3|2-3|1|2|?|1|
|Score|0|0|?|0|3.1|?|?|

Bootstrap time: Some IaC frameworks use some kind of resources for state or access management,
which is shared across IaC projects within the same account.

Versatility Rating: The ability to add other infrastructure ontop of the lambda function and extend the
given stack

#### Evaluation Takeaways

What we learned from the evaluation:


- AWS has some variety in the time the api calls take, which we especially observed for
the lambda updateFunction call. It can be as fast as 15s but a moment later it might be at
35s. This makes a true obsession and optimization for speed a little bit difficult, and leaves the
numbers in that code category more as a median than an exact value.
- Debugger integration depends on the tool working together with the build utility. As bun is
still in the early stages, bun is not yet supported by most of the tools. A generic node / bun
approach outside of the IaC tool might come to the rescue here:
[link](https://stackoverflow.com/questions/64689865/debugging-lambda-locally-using-cdk-not-sam).

## On the sidelines: Winglang

<GithubRepoTag text="Winglang" repoSlug="winglang/wing" stargazers="2.6k"
issues="671"/>  is an up-and-coming IaC tool. It got founded in 2022(?) by the original founder of the
code that eventually became the CDK (link twitter for guy).

## Rounding up

Looking at the range of tools that is available, it has become clear that some of them are more
geared towards serverless development than others. At the same time within your own organization
you may have teams which have a different areas of focus. Having these serverless-tuned tools for us made
for a far better development experience, less frustrations and faster iterations. Depending on
your flexibility, in the end it might not be a question of "the best tool", but choosing different
tools depending on the purpose.

For our purpose of serverless bun lambda functions, the ?.


### Footnotes
[^1]: https://twitter.com/Werner/status/1528384285924806657
[^2]: https://www.youtube.com/watch?v=AYYTrDaEwLs